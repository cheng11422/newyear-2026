<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>2026 æ–°å¹´ç¥ç¦</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        canvas {
            display: block;
        }
        /* åŠ è½½æç¤º */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 20px;
            opacity: 0.8;
            z-index: 100;
        }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>
<div class="loading" id="loading">åŠ è½½ä¸­...</div>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const loading = document.getElementById('loading');
    
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;
    
    // é…ç½®
    const particleSize = 3;
    const particleGap = 6;
    
    let particles = [];
    let fireworks = [];
    
    // æ›´æ–°ä¸ºæ¸©é¦¨ç¥ç¦è¯­åºåˆ—
    const textSequence = [
        { text: "å†è§ 2025", time: 4000 },
        { text: "ä½ çš„2025å¹´å¯èƒ½å¹¶ä¸å®¹æ˜“", time: 4000 },
        { text: "ä½†æˆ‘ç›¸ä¿¡ 2026 å¹´", time: 3500 },
        { text: "ä¸è®ºå®¶åº­è¿˜æ˜¯ç”Ÿæ´»", time: 3500 },
        { text: "ä½ éƒ½ä¼šè¶Šæ¥è¶Šé¡ºåˆ©", time: 4000 },
        { text: "æ„¿ 2026 å¹´", time: 3500 },
        { text: "ä½ è¢«æ¸©æŸ”ä»¥å¾…", time: 3500 },
        { text: "æ‰€æ±‚çš†å¦‚æ„¿ âœ¨", time: 4000 },
        { text: "æ–°çš„ä¸€å¹´", time: 3000 },
        { text: "æ„¿ä½ èº«ä½“å¥åº·", time: 3500 },
        { text: "å®¶äººå¹³å®‰", time: 3500 },
        { text: "å¿ƒä¸­æœ‰å…‰ ğŸŒŸ", time: 4000 },
        { text: "2026", time: 3500 },
        { text: "æ„¿æ‰€æœ‰åŠªåŠ›éƒ½æœ‰å›æŠ¥", time: 4000 },
        { text: "æ‰€æœ‰ç­‰å¾…éƒ½æœ‰ç»“æœ ğŸ†", time: 4000 },
        { text: "æ„¿ä½ æ‰€åˆ°ä¹‹å¤„çš†æ˜¯ç¾å¥½", time: 4000 },
        { text: "æ‰€é‡ä¹‹äººçš†æ˜¯å–„æ„ ğŸ’–", time: 4000 },
        { text: "ä¸ç®¡è¿‡å»å¦‚ä½•", time: 3500 },
        { text: "2026 éƒ½æ˜¯æ–°çš„å¼€å§‹ ğŸŒˆ", time: 4500 },
        { text: "æœ‰äº›ä¸œè¥¿æˆ‘è¯´ä¸å‡ºå£", time: 4000 },
        { text: "ä½†æ˜¯ä½ ä¹ŸçŸ¥é“äº†ç­”æ¡ˆ", time: 4000 },
        { text: "ä½ çš„æ„Ÿè§‰æ˜¯å¯¹çš„", time: 5000 },
        { text: "2026 æ–°å¹´å¿«ä¹", time: 6000 }
    ];
    
    // æ€»æ—¶é•¿çº¦ 85 ç§’
    
    let currentStep = 0;
    let lastStepTime = Date.now();
    let isInitialized = false;

    // è°ƒæ•´çª—å£å¤§å°
    window.addEventListener('resize', () => {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        if (isInitialized) {
            updateParticles(textSequence[currentStep].text);
        }
    });

    // --- ç²’å­ç³»ç»Ÿï¼ˆæ–‡å­—ï¼‰---
    
    class Particle {
        constructor(x, y) {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.targetX = x;
            this.targetY = y;
            this.vx = Math.random() * 2 - 1;
            this.vy = Math.random() * 2 - 1;
            // ä¿®æ”¹ä¸ºç™½è‰²ç³»ï¼Œé€‚å½“è°ƒäº®
            this.color = `hsl(0, 0%, ${Math.random() * 30 + 80}%)`;
            this.size = particleSize;
            this.friction = 0.88 + Math.random() * 0.1;
        }
        
        update() {
            // å‘ç›®æ ‡ç§»åŠ¨
            const dx = this.targetX - this.x;
            const dy = this.targetY - this.y;
            
            // æ ¹æ®æ–‡å­—é•¿åº¦è°ƒæ•´ç¼“åŠ¨é€Ÿåº¦ï¼ˆé•¿å¥å­æ›´æ…¢ï¼‰
            const easing = textSequence[currentStep].text.length > 10 ? 0.06 : 0.08;
            this.x += dx * easing;
            this.y += dy * easing;
            
            // éšæœºå¾®åŠ¨
            this.vx *= this.friction;
            this.vy *= this.friction;
            this.x += this.vx;
            this.y += this.vy;
            
            // è¾¹ç•Œåå¼¹
            if (this.x < 0 || this.x > width) this.vx *= -0.8;
            if (this.y < 0 || this.y > height) this.vy *= -0.8;
        }
        
        draw() {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    // --- å¢å¼ºç‰ˆç»†å‹å¸¦å°¾çƒŸèŠ±ç³»ç»Ÿ ---
    
    class FireworkParticle {
        constructor(x, y, color, isLarge = false) {
            this.x = x;
            this.y = y;
            this.angle = Math.random() * Math.PI * 2;
            this.speed = isLarge ? 
                (Math.random() * 4 + 2.5) :  // å¤§ç²’å­é€Ÿåº¦æ›´å¿«
                (Math.random() * 3 + 1.5);   // å°ç²’å­é€Ÿåº¦æ­£å¸¸
            this.friction = 0.94 + Math.random() * 0.03; // å‡å°‘æ‘©æ“¦ï¼Œå°¾å·´æ›´é•¿
            this.gravity = 0.03 + Math.random() * 0.02; // å‡å°‘é‡åŠ›ï¼Œé£˜å¾—æ›´ä¹…
            this.alpha = 1;
            this.color = color;
            this.vx = Math.cos(this.angle) * this.speed;
            this.vy = Math.sin(this.angle) * this.speed;
            this.size = isLarge ? 
                (Math.random() * 2 + 1.8) :  // å¤§ç²’å­ï¼š1.8-3.8px
                (Math.random() * 1.2 + 0.8); // å°ç²’å­ï¼š0.8-2px
            this.trail = []; // è½¨è¿¹æ•°ç»„
            this.maxTrailLength = isLarge ? 12 : 8; // å¤§ç²’å­è½¨è¿¹æ›´é•¿
            this.isLarge = isLarge;
        }

        update() {
            // ä¿å­˜å½“å‰ä½ç½®åˆ°è½¨è¿¹
            this.trail.push({x: this.x, y: this.y});
            if (this.trail.length > this.maxTrailLength) {
                this.trail.shift();
            }
            
            this.vx *= this.friction;
            this.vy *= this.friction;
            this.vy += this.gravity;
            this.x += this.vx;
            this.y += this.vy;
            this.alpha -= this.isLarge ? 0.006 : 0.008; // å¤§ç²’å­æ¶ˆå¤±æ›´æ…¢
            this.size *= 0.99; // æ›´æ…¢çš„ç¼©å°é€Ÿåº¦
        }

        draw() {
            // ç»˜åˆ¶è½¨è¿¹ï¼ˆå°¾å·´ï¼‰
            for (let i = 0; i < this.trail.length; i++) {
                const point = this.trail[i];
                const trailAlpha = (i / this.trail.length) * this.alpha * 0.7;
                const trailSize = this.size * (i / this.trail.length * 0.5 + 0.5);
                
                ctx.globalAlpha = trailAlpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(point.x, point.y, trailSize, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶ç²’å­æœ¬èº«
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
            
            // å¤§ç²’å­æ·»åŠ å‘å…‰æ•ˆæœ
            if (this.isLarge) {
                ctx.globalAlpha = this.alpha * 0.4;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.globalAlpha = 1;
        }
    }

    class Firework {
        constructor(isSpecial = false) {
            this.x = Math.random() * width;
            this.y = height + 20;
            this.targetY = Math.random() * (height / 2.2) + 80; // çˆ†ç‚¸é«˜åº¦æ›´é«˜
            this.speed = Math.random() * 4 + 5; // æé«˜ä¸Šå‡é€Ÿåº¦
            
            // æ ¹æ®æ˜¯å¦æ˜¯ç‰¹æ®Šæ—¶åˆ»è°ƒæ•´é¢œè‰²
            if (isSpecial) {
                // ç‰¹æ®Šæ—¶åˆ»ä½¿ç”¨é‡‘è‰²/æ¸©æš–è‰²è°ƒ
                const hue = 40 + Math.random() * 20; // é‡‘è‰²è°ƒ
                this.color = `hsl(${hue}, 80%, 60%)`;
                this.secondaryColor = `hsl(${(hue + 30) % 360}, 90%, 70%)`;
                this.sparkCount = Math.random() * 80 + 120; // æ›´å¤šç«èŠ±
            } else {
                // æ™®é€šæ—¶åˆ»
                const hue = Math.random() * 360;
                const saturation = Math.random() * 40 + 60;
                const lightness = Math.random() * 30 + 50;
                this.color = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                this.secondaryColor = `hsl(${(hue + 60) % 360}, ${saturation}%, ${lightness + 10}%)`;
                this.sparkCount = Math.random() * 60 + 80; // æ­£å¸¸ç«èŠ±æ•°é‡
            }
            
            this.exploded = false;
            this.particles = [];
            this.trail = [];
            this.size = 2.5; // æ›´å¤§çš„çƒŸèŠ±å¤´
            this.largeSparkRatio = 0.3; // 30%æ˜¯å¤§ç²’å­
            this.isSpecial = isSpecial;
        }

        update() {
            if (!this.exploded) {
                // æ·»åŠ è½¨è¿¹
                this.trail.push({x: this.x, y: this.y, size: this.size});
                if (this.trail.length > 8) this.trail.shift();
                
                this.y -= this.speed;
                if (this.y <= this.targetY) {
                    this.explode();
                }
            } else {
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    this.particles[i].update();
                    if (this.particles[i].alpha <= 0) {
                        this.particles.splice(i, 1);
                    }
                }
            }
        }

        explode() {
            this.exploded = true;
            
            // åˆ›å»ºä¸»è¦çˆ†ç‚¸æ•ˆæœ
            const largeCount = Math.floor(this.sparkCount * this.largeSparkRatio);
            const smallCount = this.sparkCount - largeCount;
            
            // å¤§ç²’å­
            for (let i = 0; i < largeCount; i++) {
                this.particles.push(new FireworkParticle(this.x, this.y, this.color, true));
            }
            
            // å°ç²’å­
            for (let i = 0; i < smallCount; i++) {
                this.particles.push(new FireworkParticle(this.x, this.y, this.color, false));
            }
            
            // æ¬¡çº§ç«èŠ±æ•°é‡
            const secondaryCount = this.isSpecial ? this.sparkCount * 0.4 : this.sparkCount * 0.3;
            for (let i = 0; i < secondaryCount; i++) {
                const isLarge = Math.random() < 0.2;
                const particle = new FireworkParticle(
                    this.x + (Math.random() - 0.5) * 20,
                    this.y + (Math.random() - 0.5) * 20,
                    this.secondaryColor,
                    isLarge
                );
                particle.alpha = 0.7;
                if (!isLarge) particle.size *= 0.7;
                this.particles.push(particle);
            }
            
            // ç‰¹åˆ«äº®ç«èŠ±æ•°é‡
            const brightCount = this.isSpecial ? 5 : 3;
            for (let i = 0; i < brightCount; i++) {
                const particle = new FireworkParticle(this.x, this.y, "white", true);
                particle.size = this.isSpecial ? 4.0 : 3.5;
                particle.alpha = 0.9;
                particle.speed = Math.random() * 6 + 3;
                this.particles.push(particle);
            }
        }

        draw() {
            if (!this.exploded) {
                // ç»˜åˆ¶è½¨è¿¹ï¼ˆå¸¦å‘å…‰æ•ˆæœï¼‰
                for (let i = 0; i < this.trail.length; i++) {
                    const alpha = i / this.trail.length * 0.6;
                    const size = this.trail[i].size * (i/this.trail.length * 0.3 + 0.2);
                    
                    ctx.globalAlpha = alpha;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.trail[i].x, this.trail[i].y, size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // è½¨è¿¹å‘å…‰æ•ˆæœ
                    ctx.globalAlpha = alpha * 0.3;
                    ctx.beginPath();
                    ctx.arc(this.trail[i].x, this.trail[i].y, size * 1.5, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.globalAlpha = 1;
                
                // ç»˜åˆ¶çƒŸèŠ±å¤´ï¼ˆå¸¦å‘å…‰æ•ˆæœï¼‰
                ctx.shadowBlur = this.isSpecial ? 15 : 10;
                ctx.shadowColor = this.color;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
                
                // çƒŸèŠ±å¤´å…‰æ™•
                ctx.globalAlpha = 0.4;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * (this.isSpecial ? 1.8 : 1.5), 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            } else {
                this.particles.forEach(p => p.draw());
            }
        }
    }

    // --- æ–‡å­—å¤„ç† ---
    
    function createTextParticles(text) {
        const offCanvas = document.createElement('canvas');
        const offCtx = offCanvas.getContext('2d');
        offCanvas.width = width;
        offCanvas.height = height;
        
        // æ ¹æ®æ–‡å­—é•¿åº¦å’Œå†…å®¹è°ƒæ•´å­—ä½“å¤§å°
        let fontSize = 120;
        if (text.length <= 4) fontSize = 150;
        if (text.length > 8) fontSize = 100;
        if (text.length > 12) fontSize = 80;
        if (text.length > 15) fontSize = 70;
        if (window.innerWidth < 600) fontSize *= 0.6;

        offCtx.font = `bold ${fontSize}px "Microsoft YaHei", sans-serif`;
        offCtx.fillStyle = 'white';
        offCtx.textAlign = 'center';
        offCtx.textBaseline = 'middle';
        offCtx.fillText(text, width / 2, height / 2);
        
        const imageData = offCtx.getImageData(0, 0, width, height).data;
        const newTargets = [];
        
        for (let y = 0; y < height; y += particleGap) {
            for (let x = 0; x < width; x += particleGap) {
                const index = (y * width + x) * 4;
                const alpha = imageData[index + 3];
                
                if (alpha > 128) {
                    newTargets.push({ x, y });
                }
            }
        }
        
        return newTargets;
    }

    function updateParticles(text) {
        const targets = createTextParticles(text);
        
        // ç¡®ä¿ç²’å­æ•°é‡åŒ¹é…
        if (targets.length > particles.length) {
            const numToAdd = targets.length - particles.length;
            for (let i = 0; i < numToAdd; i++) {
                particles.push(new Particle(width / 2, height / 2));
            }
        }
        
        // åˆ†é…æ–°ç›®æ ‡
        for (let i = 0; i < Math.min(particles.length, targets.length); i++) {
            particles[i].targetX = targets[i].x;
            particles[i].targetY = targets[i].y;
            
            // ä¿®æ”¹ä¸ºç™½è‰²ç³»ï¼Œä¿æŒç»Ÿä¸€
            particles[i].color = `hsl(0, 0%, ${Math.random() * 30 + 80}%)`;
        }
        
        // ç§»é™¤å¤šä½™ç²’å­
        if (targets.length < particles.length) {
            particles.splice(targets.length);
        }
    }

    // --- ä¸»å¾ªç¯ ---
    
    function animate() {
        // æ·¡å‡ºæ•ˆæœ
        ctx.fillStyle = 'rgba(0, 0, 0, 0.08)'; // æ›´æ·¡çš„èƒŒæ™¯ï¼Œè®©æ–‡å­—æ›´æ¸…æ™°
        ctx.fillRect(0, 0, width, height);
        
        // 1. å¤„ç†æ–‡å­—åˆ‡æ¢
        const now = Date.now();
        const currentConfig = textSequence[currentStep];
        const currentText = currentConfig.text;
        
        if (now - lastStepTime > currentConfig.time) {
            currentStep = (currentStep + 1) % textSequence.length;
            lastStepTime = now;
            updateParticles(textSequence[currentStep].text);
            
            // åˆ¤æ–­æ˜¯å¦ç‰¹æ®Šæ—¶åˆ»
            const isSpecialMoment = currentText.includes("âœ¨") || 
                                  currentText.includes("ğŸŒŸ") || 
                                  currentText.includes("ğŸ†") ||
                                  currentText.includes("ğŸ’–") ||
                                  currentText.includes("ğŸŒˆ") ||
                                  currentText.includes("2026") ||
                                  currentText.includes("å¿«ä¹") ||
                                  currentText.includes("é¡ºåˆ©") ||
                                  currentText.includes("å¯¹çš„");
            
            // æ–‡å­—åˆ‡æ¢æ—¶å‘å°„çƒŸèŠ±
            const fireworkCount = isSpecialMoment ? 4 : 2; // ç‰¹æ®Šæ—¶åˆ»æ›´å¤šçƒŸèŠ±
            for (let i = 0; i < fireworkCount; i++) {
                setTimeout(() => {
                    fireworks.push(new Firework(isSpecialMoment));
                }, i * 400);
            }
        }

        // 2. ç»˜åˆ¶æ–‡å­—ç²’å­
        particles.forEach(p => {
            p.update();
            p.draw();
        });

        // 3. éšæœºç”ŸæˆèƒŒæ™¯çƒŸèŠ±ï¼ˆæ ¹æ®å½“å‰æ–‡å­—å†…å®¹è°ƒæ•´é¢‘ç‡ï¼‰
        let spawnChance = 0.015; // åŸºç¡€é¢‘ç‡æ›´ä½
        const currentText = textSequence[currentStep].text;
        
        // åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯é‡è¦æ—¶åˆ»
        const isImportantMoment = currentText.includes("âœ¨") || 
                                currentText.includes("ğŸŒŸ") || 
                                currentText.includes("ğŸ†") ||
                                currentText.includes("ğŸ’–") ||
                                currentText.includes("ğŸŒˆ") ||
                                currentText.includes("é¡ºåˆ©") ||
                                currentText.includes("å¯¹çš„");
        
        if (isImportantMoment) {
            spawnChance = 0.04; // é‡è¦æ—¶åˆ»é€‚å½“å¢åŠ 
        } else if (currentText.includes("2026") || currentText.includes("å¿«ä¹")) {
            spawnChance = 0.03;
        }
        
        if (Math.random() < spawnChance) {
            const isSpecial = Math.random() < 0.3; // 30%æ¦‚ç‡å‘å°„ç‰¹æ®ŠçƒŸèŠ±
            fireworks.push(new Firework(isSpecial));
        }
        
        // 4. æ›´æ–°å’Œç»˜åˆ¶çƒŸèŠ±
        for (let i = fireworks.length - 1; i >= 0; i--) {
            fireworks[i].update();
            fireworks[i].draw();
            
            // ç§»é™¤å®Œæˆçš„çƒŸèŠ±
            if (fireworks[i].exploded && fireworks[i].particles.length === 0) {
                fireworks.splice(i, 1);
            }
        }

        requestAnimationFrame(animate);
    }

    // --- åˆå§‹åŒ– ---
    function init() {
        loading.style.display = 'none';
        updateParticles(textSequence[0].text);
        isInitialized = true;
        
        // åˆå§‹çƒŸèŠ±
        for (let i = 0; i < 3; i++) {
            setTimeout(() => {
                fireworks.push(new Firework(i === 1)); // ä¸­é—´ä¸€ä¸ªæ˜¯ç‰¹æ®ŠçƒŸèŠ±
            }, i * 600);
        }
        
        animate();
    }

    // é¡µé¢åŠ è½½åå¼€å§‹
    window.addEventListener('load', () => {
        setTimeout(init, 500);
    });

</script>
</body>
</html>
